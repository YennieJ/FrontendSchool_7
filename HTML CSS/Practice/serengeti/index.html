<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mbtitest</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body class="container">
    <article class="start">
      <h1 class="mt-5 text-center">나랑 꼭 닮은 세렝게티 동물은?</h1>
      <button type="button" class="btn btn-primary mt-5" onclick="start()">
        Test start
      </button>
    </article>
    <article class="question">
      <div
        class="progress my-5"
        role="progressbar"
        aria-label="Basic example"
        aria-valuenow="25"
        aria-valuemin="0"
        aria-valuemax="100"
      >
        <div class="progress-bar" style="width: calc(100 / 12 * 1%)"></div>
      </div>

      <code id="code" class="code">code</code>
      <h2 id="question" class="text-center">Question</h2>

      <input id="type" type="hidden" />
      <button id="A" type="button" class="btn btn-primary mt-5">YES</button>
      <button id="B" type="button" class="btn btn-primary mt-5">NO</button>
    </article>
    <article class="result text-center">
      <!-- <div id="score">score</div>
      <div id="wrongAnswer">wrongAnswer</div> -->
      <h2 class="my-5">오늘 정답 갯수는?</h2>
      <p id="score" class="score fs-2 fw-bold mb-5">1/3</p>

      <div class="reStudy border border-3 border-danger rounded-2 p-5">
        <strong id="wrongAnswer" class="text-break fs-5 fw-normal"
          >worng-answer</strong
        >
      </div>
    </article>
    <!-- input type=hidden: 값을 받아야하고 화면엔 나타내고 싶지 않을 때 -->
    <input type="hidden" id="correct" value="0" />

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>

    <script>
      //문제
      let num = 1;

      // type은 A기준으로 correct
      const q = {
        1: {
          title: "Str.search()",
          question:
            "찾는 문자열이 있다면 인덱스 값을, 없다면 -1이 반환되는 메소드 중 정규식을 쓸 수 있는 메소드는 무엇인가요?",
          type: "wrong",
          A: "Str.indexOf()",
          B: "Str.search()",
        },
        2: {
          title: "Str.slice()",
          question:
            "시작 인덱스를 기준으로 문자열을 잘라내어 잘린 문자열을 반환하는 메소드 중 음수를 취급하는 메소드는 무엇인가요?",
          type: "correct",
          A: "Str.slice()",
          B: "Str.substring()",
        },
        3: {
          title: "Str.slice()",
          code: `const str = "Mozilla" <br/> console.log(str.slice(7,4))`,
          question: "의 정답은 무엇인가요?",
          type: "wrong",
          A: "lla",
          B: `""`,
        },
        4: {
          title: "Str.replace(),Str.replaceAll()",
          question:
            "문자열을 치환하여 새로운 문자열을 반환하는 Str.replace() 와 Str.replaceAll()은 정규식을 사용할 수 있다",
          type: "correct",
          A: "Yes",
          B: "No",
        },
        5: {
          title: "Str.includes()",
          question:
            "Str.includes()는 찾는 문자가 포함되어 있다면 새로운 문자열을 반환한다",
          type: "wrong",
          A: "Yes",
          B: "No",
        },
        6: {
          title: "Str.padStart()",
          code: `const question = 123; <br/> question.padStart(5,"0");`,
          question: "의 정답은 무엇인가요?",
          type: "wrong",
          A: "00123",
          B: "is not a function",
        },
        7: {
          title: "Str.split()",
          code: `const monthString = "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec" <br/>
          monthString.split(",",5)
          `,
          question: "의 정답은 무엇인가요?",
          type: "correct",
          A: "['Jan', 'Feb', 'Mar', 'Apr', 'May']",
          B: "['J', 'a', 'n', ',', 'F']",
        },
        8: {
          title: "Str.split()",
          code: `const monthString = "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec" <br/>
          // ['Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec']
          `,
          question: "을 만들기 위해서 사용해야 하는 메소드는 무엇인가요?",
          type: "wrong",
          A: "monthString.split(',')",
          B: "monthString.split()",
        },
        9: {
          title: "parseInt(),parseFloat()",
          question:
            "parseInt()는 정수로, parseFloat()는 실수로 반환 하는데 Number Type만 가능하다.",
          type: "wrong",
          A: "Yes",
          B: "No",
        },
      };

      const questionLength = Object.keys(q).length;
      const wrongAnswer = [];
      // 문제페이지로 넘어가기
      function start() {
        $(".start").hide();
        $(".question").show();
        next();
      }
      // buttonA click
      $("#A").click(function () {
        const type = $("#type").val(); // correct
        if (type === "correct") {
          // $("#A").css("background-color", "#0d6efd");

          // 맞았을 때 점수 추가
          const preValue = $("#" + type).val(); //#correct.value = "0"
          $("#" + type).val(parseInt(preValue) + 1);
        } else {
          // $("#A").css("background-color", "#dc3545");
          // console.log("nn");

          // 틀린 타이틀 저장
          // 왜 -1 이냐면 next()가 내용이 다 그려진 후 ++ 되니까
          wrongAnswer.push(q[num - 1]["title"]);
        }

        next();
      });
      // buttonB click
      $("#B").click(function () {
        const type = $("#type").val(); // correct
        if (type === "correct") {
          wrongAnswer.push(q[num - 1]["title"]);
        } else {
          const preValue = $("#correct").val();
          $("#correct").val(parseInt(preValue) + 1);
        }

        next();
      });
      // 다음문제로 넘어가기
      function next() {
        if (num === questionLength + 1) {
          $(".question").hide();
          $(".result").show();

          // 나중에 결과
          $("#score").html(`${$("#correct").val()} / ${Object.keys(q).length}`);
          $("#wrongAnswer").html(wrongAnswer.join());
        } else {
          $(".progress-bar").attr(
            "style",
            "width: calc(100 / " + questionLength + "*" + num + "%)"
          );
          $("#question").html(q[num]["question"]);
          q[num]["code"] ? $(".code").show() : $(".code").hide();
          $("#code").html(q[num]["code"]);
          $("#type").val(q[num]["type"]);
          $("#A").html(q[num]["A"]);
          $("#B").html(q[num]["B"]);

          num++;
        }
      }
    </script>
  </body>
</html>
